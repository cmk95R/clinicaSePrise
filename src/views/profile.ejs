<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %>
<body>
    <%- include('partials/header') %>

    <main class="profile--main">
        <div class="profile__main--box">
            <div class="profile__main__box--title">
                <img class="img_logo" src="/images/Se Price/32.png" alt="" style="display: flex; align-items: center;width: 150px;">
                <!-- <div class="profile__main__box__formbox--image"> -->
                    <!-- <img id="avatarProfile" width="100px" src="/images/productos/userImages/<%= avatar || "Andres.jpg" %>" alt="Imagen de perfil" data-bs-toggle="modal" data-bs-target="#exampleModal" style="cursor: pointer; border-radius: 50%"> -->
                <!-- </div> -->
            </div>
            <div class="profile_text_card">
                <h2>Hola : <%= name %> </h2>
            </div>
            <div class="profile__main__box--formbox">
                <form class="profile__main__box__formbox--formbox" action="/users/update?_method=PUT" method="post" enctype="multipart/form-data">
                   

                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h1 class="modal-title fs-5" id="exampleModalLabel">Avatares</h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                    <% avatars.forEach(avatar => { %>                                        
                                            <img id="avatarModal" width="100px" src="/images/productos/userImages/<%= avatar.name %>" alt="Avatar" style="cursor: pointer; border-radius: 50%;" data-avatar="<%= avatar.name %>">                                        
                                    <% }); %>
                                    <input type="hidden" id="avatarInput" name="avatar" value="<%= avatar || "Andres.jpg" %>">
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            </div>
                          </div>
                        </div>
                      </div>

                    <div class="profile__main__box__formbox--form">
                    <div class="col-11 col-md-5 mb-2">
                        <label for="name" class="form-label">Nombre</label>
                        <input class="form-control" type="text" name="name" id="name" value="<%= name %>">
                        <small class="text-danger ms-2" id="msgError-name">
                            <%= locals.errors && (errors.name && errors.name.msg) %>
                          </small>
                    </div>
                    <div class="col-11 col-md-5 mb-2">
                        <label for="lastName" class="form-label">Apellido</label>
                        <input class="form-control" type="text" name="lastName" id="lastName" value="<%= lastName %>">
                        <small class="text-danger ms-2" id="msgError-lastName">
                            <%= locals.errors && (errors.lastName && errors.lastName.msg) %>
                          </small>
                    </div>
                    <div class="col-11 col-md-5 mb-2">
                        <label for="province" class="form-label">Provincia</label>
                        <select type="text" class="form-select" id="province" name="province">
                            <option value="" hidden>Seleccione...</option>
                            <% if (address.province) { %>
                                <option value="<%= address.province %>" selected><%= address.province %></option>
                            <% } %>
                        </select>
                    </div>
                    <div class="col-11 col-md-5 mb-2">
                        <label for="city" class="form-label">Ciudad</label>
                        <select type="text" class="form-select" id="city" name="city">
                            <option value="" hidden>Seleccione...</option>
                            <% if (address.city) { %>
                                <option value="<%= address.city %>" selected><%= address.city %></option>
                            <% } %>
                        </select>
                    </div>
                    <div class="col-11 col-md-5 mb-2">
                        <label class="form-label" for="street">Calle</label>
                        <input class="form-control" type="text" name="street" id="street" placeholder="Domicilio" value="<%= address.street %>">
                    </div>
                    <div class="col-11 col-md-5 mb-2">
                        <label for="birthdate" class="form-label">Fecha de nacimiento</label>
                        <input class="form-control" type="date" name="birthdate" id="birthdate" value="<%= birthdate %>">
                        <small class="text-danger ms-2" id="msgError-birthdate">
                            <%= locals.errors && (errors.birthdate && errors.birthdate.msg) %>
                        </small>
                    </div>
                    <div>
                        <button type="button" class="profile__main__box__formbox--button" data-bs-toggle="modal" data-bs-target="#MiexampleModalCenter">
                            Mis Turnos
                        </button>
                        
                    </div>
                    <br>
                    
                    <div class="profile__main__box__formbox--buttonbox">
                        <a href="/">
                            <button class="profile__main__box__formbox--button" type="submit">Guardar cambios</button>
                        </a>
                        
                                           
                          <!-- Modal -->
                        <div class="modal fade" id="MiexampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">MIS TURNOS</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead>
                        <!-- <tr>
                            <th>Tipo</th>
                            <th>Especialidad</th>
                            <th>Profesional</th>
                            <th>Piso</th>
                            <th>Consultorio</th>
                            <th>Fecha</th>
                            <th>Hora</th>
                        </tr>
                        <tbody>
                            <tr>
                              <td>Consulta</td>
                              <td>Cardiologia</td>
                              <td>Juan Perez</td>
                              <td>1ro</td>
                              <td>A</td>
                              <td>24/06/2024</td>
                              <td>09:00</td>           
                            </tr> -->

                            <tr>
                                <th>Estudios</th>
                                <th>Descripcion</th>
                                <th>Duracion</th>
                                <th>Preparacion</th>
                                <th>Fecha</th>
                                <th>Hora</th>
                                <th>Accion</th>
                            </tr>
                              <tr>
                                <td>Hemograma</td>
                                <td>An√°lisis de sangre completo </td>
                                <td>30 Minutos</td>
                                <td>No requiere ayuno</td>
                                <td>27/06/2024</td>
                                <td>14:00</td>
                                <td>
                                    <button type="button" class="btn btn-outline-danger btn-sm btn-action">Cancelar Turno</button>
                                </td>
                                           
                                </tr>  
                          </tbody>
                    </thead>
                    
                    
                </table>
            </div>

          </div>
          
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">CERRAR</button>
            <a href="/users/turnos" class="btn btn-outline-primary">
                NUEVO TURNO
            </a>
          </div>
      </div>
    </div>
                        </div>

                    </div>
                    </div>
                </form>
            </div>
        </div>
    </main>

   
    
</body>
<%- include('partials/footer') %>


<%- include('partials/scripts') %>
<script src="/js/profile.js"></script>
</html>
